<!-- public/extensions/third-party/html-to-image1/settings.html -->
<div>
  <!-- 修改标题 -->
  <h2>SillyTavern截图 (html-to-image)</h2>

  <div class="option-group">
    <h3>截图操作</h3>
    <button id="st_h2c_captureLastMsgBtn">截取最后一条消息</button>
  </div>

  <hr>

  <div class="option-group">
    <h3>扩展设置</h3>
    <div class="option">
      <label for="st_h2c_screenshotDelay">截图前延迟 (ms):</label>
      <input type="number" id="st_h2c_screenshotDelay" min="0" max="2000" step="50">
    </div>
     <!-- 移除了 scrollDelay, html-to-image 和当前逻辑不太需要 -->
    <!-- 增加了 imageTimeout -->
     <div class="option">
      <label for="st_h2c_imageTimeout">图片加载超时 (ms):</label>
       <input type="number" id="st_h2c_imageTimeout" min="0" max="30000" step="1000">
    </div>
     <div class="option">
      <label for="st_h2c_qualityDisplay">图片格式:</label>
      <input type="text" value="PNG (无损)" readonly style="background-color: #222; border-color: #444; text-align: center;">
    </div>

    <hr>
     <!-- 修改标题和标签 -->
    <h3>质量设置 (html-to-image)</h3>
    <div class="option">
        <!-- 修改标签 Scale -> PixelRatio -->
        <label for="st_h2c_screenshotScale">渲染像素比 (PixelRatio):</label>
        <input type="number" id="st_h2c_screenshotScale" min="0.5" max="4.0" step="0.1">
    </div>
     <div class="option">
       <!-- 修改并禁用：html-to-image 核心就是使用 SVG ForeignObject -->
        <label for="st_h2c_useForeignObjectRendering">使用SVG渲染 (html-to-image核心):</label>
        <input type="checkbox" id="st_h2c_useForeignObjectRendering" checked disabled>
    </div>
     <!-- 新增 cacheBust 设置 -->
     <div class="option">
        <label for="st_h2c_cacheBust">清除图片缓存 (用于CORS图片):</label>
        <input type="checkbox" id="st_h2c_cacheBust">
    </div>
    
    <div class="option">
        <label for="st_h2c_autoInstallButtons">自动安装消息按钮:</label>
        <input type="checkbox" id="st_h2c_autoInstallButtons">
    </div>
    <!-- 移除了 altButtonLocation, 因为按钮定位逻辑已固定 -->
     <div class="option">
      <label for="st_h2c_debugOverlay">显示调试覆盖层（debugOverlay）:</label>
        <input type="checkbox" id="st_h2c_debugOverlay"/>
     </div>
     <!-- 隐藏的输入框，以防JS读取时出错，实际不显示-->
      <input type="checkbox" id="st_h2c_altButtonLocation" style="display:none;">


    <button id="st_h2c_saveSettingsBtn">保存设置</button>
    <div class="status-area save-status" id="st_h2c_saveStatus"></div>
  </div>

   <!-- 修改页脚 -->
  <div class="footer">
    ST截图工具 v7.0-hti
  </div>
</div>
--- END OF FILE settings.html ---
